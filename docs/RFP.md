# WISH RING 앱 기능 명세서

## 1. 화면별 기능

### 1.1 스플래시 화면

| 기능 ID | 기능명 | 상세 설명 |
|---------|--------|-----------|
| SPL-01 | 화면 표시 | 앱 실행 시 1.5~2초간 스플래시 화면 표시 |
| SPL-02 | 로고 애니메이션 | 중앙 WISH RING 로고 & 메탈릭 퍼플포일 심볼 반짝 효과 (색상 변경됨, 이미지참조) |
| SPL-03 | 텍스트 애니메이션 | 링 사이 텍스트 스치기 (1차: 'WISH RING', 2차: "성공을 품은 반지") |
| SPL-04 | 자동 전환 | 애니메이션 종료 후 홈 화면으로 자동 진입 |

### 1.2 홈 화면 (Today's Count)

| 기능 ID | 기능명 | 상세 설명 |
|---------|--------|-----------|
| HOME-01 | 메시지 표시 | 상단에 "나는 매일 성장하고 있다." 고정 텍스트 표시 |
| HOME-02 | 카운트 표시 | 오늘 날짜의 누적 카운트 표시 (최대 99,999, 기본 목표 1,000) |
| HOME-03 | 원형 게이지 | 목표 대비 진행률을 원형 게이지로 시각화 |
| HOME-04 | 게이지 색상 | 목표 미달성: 보라색, 목표 달성: 무지개 색상으로 변경 (달성 후 유지) |
| HOME-05 | 위시 버튼 | "위시(Wish)" 버튼 클릭 시 입력 화면 이동 |
| HOME-06 | 날짜별 리스트 | 과거 기록 리스트 표시 (날짜, 위시 문장, 카운터 횟수) |
| HOME-07 | 리스트 클릭 | 항목 클릭 시 해당 날짜의 상세 기록 화면 이동 |
| HOME-08 | 배터리 아이콘 | 하단 BLE 디바이스 배터리 잔량 % 표시 |
| HOME-09 | 공유 아이콘 | SNS 공유하기 아이콘 클릭 시 공유 기능 실행 |

### 1.3 위시 입력 화면

| 기능 ID | 기능명 | 상세 설명 |
|---------|--------|-----------|
| INPUT-01 | 확언 입력 | "원하는 것을 적어보세요." 플레이스홀더의 텍스트 입력 필드 |
| INPUT-02 | 목표 입력 | "목표횟수를 입력하세요." 숫자 입력 필드 (기본값: 1,000) |
| INPUT-03 | 저장 버튼 | 현재 닫기 텍스트 '저장하기'로 수정 요청. 저장 시 오늘 날짜 데이터 업데이트 후 홈 화면 복귀 |
| INPUT-04 | 즉시 반영 | 저장 완료 시 홈 화면에 변경사항 즉시 표시 |

### 1.4 상세 기록 화면

| 기능 ID | 기능명 | 상세 설명 |
|---------|--------|-----------|
| DETAIL-01 | 날짜 표시 | 선택된 날짜 표시 (YYYY.MM.DD 형식) |
| DETAIL-02 | 카운터 표시 | 해당 날짜의 최종 카운터 집계 숫자 |
| DETAIL-03 | 위시 표시 | 해당 날짜의 위시 문장 표시 |
| DETAIL-04 | 캐릭터 이미지 | 위시링 화이트와 블랙 캐릭터 이미지 표시 |
| DETAIL-05 | 편집 불가 | 과거 데이터는 수정 불가 (읽기 전용) |

### 1.5 SNS 공유 기능

| 기능 ID | 기능명 | 상세 설명 |
|---------|--------|-----------|
| SHARE-01 | 카드 생성 | 메인 카운트 영역만 클린 캡처하여 이미지 자동 생성 |
| SHARE-02 | 미리보기 | 생성된 공유 카드 이미지 미리보기 표시 |
| SHARE-03 | 공유 시트 | Android OS 기본 공유 팝업 호출 |
| SHARE-04 | 공유 채널 | 카카오톡, 인스타그램, 페이스북, 블로그, 링크 복사 지원 |
| SHARE-05 | 해시태그 | #WishRing #잠재의식 #긍정확언 #성공습관 자동 삽입 |
| SHARE-06 | 공유 메시지 | "오늘 나는 [카운트]번 더 성장했습니다 ✨" 템플릿 자동 생성 |
| SHARE-07 | 갤러리 저장 | 생성된 카드를 갤러리에 저장 옵션 제공 |

## 2. Room Database CRUD 기능

### 2.1 일일 기록 테이블 (DailyRecord)

| 작업 | 기능 ID | 설명 |
|------|---------|------|
| **Create** | DB-C-01 | 자정(00:00) 시 새로운 날짜 레코드 자동 생성 |
| | DB-C-02 | 첫 실행 시 오늘 날짜 레코드 생성 |
| **Read** | DB-R-01 | 홈 화면 진입 시 오늘 데이터 조회 (카운트, 목표, 위시) |
| | DB-R-02 | 홈 화면 리스트용 과거 날짜별 기록 조회 |
| | DB-R-03 | 상세 화면용 특정 날짜 전체 데이터 조회 |
| **Update** | DB-U-01 | BLE +1 이벤트 수신 시 오늘 카운트 증가 |
| | DB-U-02 | 위시 입력 화면에서 오늘 위시 문장/목표 업데이트 |
| | DB-U-03 | 목표 달성 시 달성 상태 플래그 업데이트 |
| **Delete** | - | 삭제 기능 없음 (모든 데이터 영구 보존) |

### 2.2 BLE 이벤트 로그 테이블 (BleEventLog)

| 작업 | 기능 ID | 설명 |
|------|---------|------|
| **Create** | DB-C-03 | RESET 이벤트 수신 시 타임스탬프와 카운트 값 로깅 |
| **Read** | - | - |

### 2.3 설정 데이터 (Preferences)

| 작업 | 기능 ID | 설명 |
|------|---------|------|
| **Store** | PREF-01 | 최근 페어링된 디바이스 MAC 주소 저장 |
| **Load** | PREF-02 | 앱 시작 시 최근 페어링 디바이스 정보 로드 |

## 3. MRD SDK 연동 기능

| 기능 ID | 구분 | 기능 설명 |
|---------|------|-----------|
| MRD-01 | 연결 | 앱 실행 시 MRD SDK 자동 초기화 → 콜백 등록 → 디바이스 자동 연결 |
| MRD-02 | 연결 | SDK 내장 백그라운드 재연결 지원 (자동 처리) |
| MRD-03 | 연결 | 연결 상태 콜백 수신 → UI 표시 (연결됨/해제됨/연결중) |
| MRD-04 | 수신 | MrdReadEnum.HEART 콜백으로 +1 카운트 이벤트 수신 및 DB 업데이트 |
| MRD-05 | 수신 | MrdReadEnum.BP 콜백으로 BATTERY(level%) 정보 수신 및 UI 갱신 |
| MRD-06 | 수신 | MrdReadEnum.RESET 콜백으로 RESET 이벤트 수신 (앱 일일 누적은 유지, 로그만 기록) |
| MRD-07 | 오프라인 | SDK 연결 끊어져도 로컬 DB 유지, SDK 재연결 시 누적 데이터 콜백으로 수신 |

## 4. 공통 기능

| 기능 ID | 기능명 | 설명 |
|---------|--------|------|
| COM-01 | 자정 처리 | 로컬 타임존 자정(00:00) 감지 및 새 일자 레코드 생성 |
| COM-02 | 데이터 확정 | 자정 넘어가면 전일 데이터 확정 저장 (수정 불가) |
| COM-03 | 데이터 영속성 | 반지 초기화와 무관하게 앱 데이터 유지 |
| COM-04 | 오프라인 지원 | BLE 연결 없어도 앱 사용 가능 (카운트 제외) |
| COM-05 | 최대값 제한 | 일일 카운트 최대 99,999 제한 |

## 5. 데이터 구조

### 5.1 DailyRecord 테이블
| 필드명 | 타입 | 설명 |
|--------|------|------|
| date | String (PK) | 날짜 (YYYY-MM-DD) |
| count | Int | 누적 카운트 |
| wishText | String | 확언 문장 |
| targetCount | Int | 목표 횟수 |
| isAchieved | Boolean | 목표 달성 여부 |

### 5.2 BleEventLog 테이블  
| 필드명 | 타입 | 설명 |
|--------|------|------|
| id | Long (PK) | 자동 증가 ID |
| timestamp | Long | 이벤트 발생 시간 |
| eventType | String | 이벤트 타입 (RESET만 기록) |
| value | Int | RESET 시점의 카운트 값 |

## 6. 제약사항 및 납품물

### 6.1 제약사항
- 플랫폼: Android 전용 (iOS/WatchOS 제외)
- BLE SDK: 제조사 제공 공장 SDK 사용
- 최대 카운트: 일일 99,999회
- 데이터 저장: 로컬 Room DB만 사용 (클라우드 동기화 없음)
- 디바이스: 하나의 WISH RING만 연결 가능

### 6.2 납품물
- Android APK 파일
- 기능 명세서의 모든 기능이 구현된 완성 앱

---

**작성일**: 2025년 9월 2일  
**문서 버전**: 3.0 (기능 중심 상세 버전)